#!/bin/bash

TARGET="$1"
TOOLS=("baidu" "hackertarget" "otx" "rapiddns" "urlscan" "vhost")

curl -s "https://crt.sh/?q=${TARGET}&output=json" | jq -r '.[] | "\(.name_value)\n\(.common_name)"' | sort -u > "${TARGET}_crt.sh.txt"
for source in "${TOOLS[@]}"; do theHarvester -d "${TARGET}" -b $source -f "${source}_${TARGET}";done
cat *.json |jq -r '.hosts[]' 2>/dev/null | cut -d ':' -f 1| sort -u >"${TARGET}_theHarvester.txt"
cat ${TARGET}_*.txt | sort -u > "${TARGET}_subdomains_passive.txt"

rm "${TARGET}_crt.sh.txt"
rm "${TARGET}_theHarvester.txt"
rm *.json
rm *.xml
